{"ast":null,"code":"var _jsxFileName = \"/Users/n/my-app/src/Components/Bookinfos.js\";\nimport React from 'react';\nimport { useQuery, useMutation } from '@apollo/client';\nimport { DELETE_BOOKINFO, BOOKINFO } from './Query';\nimport EditForm from './EditBookinfo';\nimport { Table, TableBody, TableCell, TableFooter, TableHeader, TableRow, Text, Grommet, Button, Box, Heading } from 'grommet';\nimport { Add, Close, Edit } from \"grommet-icons\";\nexport const BookInfos = React.createContext();\nconst COLUMNS = [{\n  property: 'id',\n  label: 'ID'\n}, {\n  property: 'title',\n  label: 'Title',\n  dataScope: 'row',\n  format: book => /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 26,\n      columnNumber: 21\n    }\n  }, book.title)\n}, {\n  property: 'author',\n  label: 'Author'\n}];\n\nfunction Books() {\n  const {\n    loading,\n    error,\n    data\n  } = useQuery(BOOKINFO);\n  const [deleteBookinfo] = useMutation(DELETE_BOOKINFO, {\n    refetchQueries: [{\n      query: BOOKINFO\n    }]\n  });\n\n  const deleteInfo = id => {\n    deleteBookinfo({\n      variables: {\n        id\n      }\n    });\n  };\n\n  if (loading) return /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 23\n    }\n  }, \"Loading...\");\n  if (error) return /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 21\n    }\n  }, \"Error :(\");\n  return /*#__PURE__*/React.createElement(Grommet, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 3\n    }\n  }, /*#__PURE__*/React.createElement(Box, {\n    margin: {\n      \"top\": \"small\"\n    },\n    pad: \"small\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 5\n    }\n  }, \"My BookInfo\"), /*#__PURE__*/React.createElement(Box, {\n    fill: true,\n    align: \"center\",\n    justify: \"center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Box, {\n    overflow: {\n      \"vertical\": \"scroll\",\n      \"horizontal\": \"auto\"\n    },\n    height: \"medium\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Table, {\n    sortable: \"true\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(TableHeader, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(TableRow, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 9\n    }\n  }, COLUMNS.map(c => /*#__PURE__*/React.createElement(TableCell, {\n    key: c.property,\n    scope: \"col\",\n    border: \"bottom\",\n    align: c.align,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Text, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 15\n    }\n  }, c.label))))), /*#__PURE__*/React.createElement(TableBody, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 7\n    }\n  }, data.bookinfos.map(book => /*#__PURE__*/React.createElement(TableRow, {\n    key: book.id,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 11\n    }\n  }, COLUMNS.map(c => /*#__PURE__*/React.createElement(TableCell, {\n    scope: \"col\",\n    border: \"bottom\",\n    key: c.property,\n    scope: c.dataScope,\n    align: c.align,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Text, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 17\n    }\n  }, c.format ? c.format(book) : book[c.property]))), /*#__PURE__*/React.createElement(Button, {\n    plain: false,\n    icon: /*#__PURE__*/React.createElement(Close, {\n      size: \"small\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 41\n      }\n    }),\n    color: \"#3D138D\",\n    margin: \"xsmall\",\n    size: \"xsmall\",\n    onClick: () => deleteInfo(book.id),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(BookInfos.Provider, {\n    value: book,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(EditForm, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 13\n    }\n  }))))), /*#__PURE__*/React.createElement(TableFooter, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(TableRow, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 9\n    }\n  }, COLUMNS.map(c => /*#__PURE__*/React.createElement(TableCell, {\n    key: c.property,\n    border: \"top\",\n    align: c.align,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 13\n    }\n  }))))))));\n}\n\nexport default Books;","map":{"version":3,"sources":["/Users/n/my-app/src/Components/Bookinfos.js"],"names":["React","useQuery","useMutation","DELETE_BOOKINFO","BOOKINFO","EditForm","Table","TableBody","TableCell","TableFooter","TableHeader","TableRow","Text","Grommet","Button","Box","Heading","Add","Close","Edit","BookInfos","createContext","COLUMNS","property","label","dataScope","format","book","title","Books","loading","error","data","deleteBookinfo","refetchQueries","query","deleteInfo","id","variables","map","c","align","bookinfos"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { useQuery, useMutation } from '@apollo/client';\nimport { DELETE_BOOKINFO, BOOKINFO } from './Query'\nimport EditForm from './EditBookinfo';\nimport {\n  Table, TableBody, TableCell, TableFooter, TableHeader, TableRow,\n  Text,\n  Grommet,\n  Button,\n  Box,\n  Heading\n} from 'grommet';\nimport { Add, Close, Edit } from \"grommet-icons\";\n\nexport const BookInfos = React.createContext()\n\nconst COLUMNS = [\n  {\n    property: 'id',\n    label: 'ID'\n  },\n  {\n    property: 'title',\n    label: 'Title',\n    dataScope: 'row',\n    format: book => <strong>{book.title}</strong>,\n  },\n  {\n    property: 'author',\n    label: 'Author',\n  },\n  \n];\n\n\nfunction Books () {\n  const { loading, error, data } = useQuery(BOOKINFO)\n\n\n  const [ deleteBookinfo ] = useMutation(DELETE_BOOKINFO, {\n    refetchQueries: [ { query: BOOKINFO } ]\n})\n\n  const deleteInfo = (id) => {\n    deleteBookinfo({ variables: { id } })\n}\n\n  if (loading) return <p>Loading...</p>;\n  if (error) return <p>Error :(</p>;\n\n  return (\n  <Grommet>\n    <Box margin={{\"top\":\"small\"}} pad=\"small\">My BookInfo</Box>\n    <Box fill align=\"center\" justify=\"center\" >\n    <Box overflow={{\"vertical\": \"scroll\",\"horizontal\": \"auto\"}} height=\"medium\" > \n    <Table sortable='true'>\n      <TableHeader>\n        <TableRow>\n          {COLUMNS.map(c => (\n            <TableCell key={c.property} scope='col'  border='bottom'  align={c.align}>\n              <Text>{c.label}</Text>\n            </TableCell>\n          ))}\n        </TableRow>\n      </TableHeader>\n      <TableBody>\n        {data.bookinfos.map(book => (\n          <TableRow key={book.id}>\n            {COLUMNS.map(c => (\n              <TableCell scope=\"col\" border=\"bottom\" key={c.property} scope={c.dataScope} align={c.align}>\n                <Text>\n                  {c.format ? c.format(book) : book[c.property]}\n                </Text>\n              </TableCell>\n            ))}\n            <Button plain={false} icon={<Close size=\"small\"/>} color=\"#3D138D\" margin=\"xsmall\" size=\"xsmall\"  onClick={() => deleteInfo(book.id)} />\n            <BookInfos.Provider value={book}>\n            <EditForm/>\n            </BookInfos.Provider>\n          </TableRow>\n        ))}\n      </TableBody>\n      <TableFooter>\n        <TableRow>\n          {COLUMNS.map(c => (\n            <TableCell key={c.property} border='top' align={c.align}>\n            </TableCell>\n          ))}\n        </TableRow>\n      </TableFooter>\n    </Table>\n    \n    </Box>\n    </Box>\n  </Grommet>\n)}\n\nexport default Books;\n\n"]},"metadata":{},"sourceType":"module"}